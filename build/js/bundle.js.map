{"version":3,"sources":["app.js"],"names":["pagina","cita","nombre","fecha","hora","servicios","iniciarApp","mostrarServicios","mostrarSeccion","cambiarSeccion","paginaSiguiente","paginaAnterior","botonesPaginacion","mostrarResumen","nombreCita","fechaCita","deshabilitarfechaAnterior","horaCita","seccionAnterior","document","querySelector","classList","remove","add","tabAnterior","querySelectorAll","forEach","enlace","addEventListener","e","preventDefault","parseInt","target","dataset","paso","async","resultado","fetch","db","json","servicio","id","precio","nombreServicio","createElement","textContent","precioServio","servicioDiv","idServicio","onclick","selecionarServicio","appendChild","error","elemento","tagName","parentElement","contains","eliminarServicio","agregarServicio","firstElementChild","nextElementSibling","filter","console","log","objeto","resumenDiv","innerHTML","removeChild","firstChild","Object","values","includes","noServicios","headingCita","serviciosCita","headingServicios","cantidad","contenedorServicio","textoServicio","precioServicio","totalServicio","split","trim","cantidadPagar","nombreTexto","value","length","mostrarAlerta","alerta","mensaje","tipo","setTimeout","fechaInput","dia","Date","getUTCDay","inputFecha","fechaHoy","year","getFullYear","getDate","mes","getMonth","fechaDeshabilitar","min","inputHora","horaCitas"],"mappings":"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","file":"bundle.js","sourcesContent":["let pagina = 1;\r\nconst cita = {\r\n\tnombre: '',\r\n\tfecha: '',\r\n\thora: '',\r\n\tservicios: [],\r\n};\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n\tiniciarApp();\r\n});\r\nfunction iniciarApp() {\r\n\tmostrarServicios();\r\n\r\n\t// resaltar el tab presionado y la sección\r\n\tmostrarSeccion();\r\n\t// ocultar o mostrar una sección según el tab presionado\r\n\tcambiarSeccion();\r\n\r\n\t// Paginación\r\n\tpaginaSiguiente();\r\n\tpaginaAnterior();\r\n\r\n\t// Comprobar páginas para ocultar o mostrar los botones\r\n\tbotonesPaginacion();\r\n\r\n\t// muestra resultado resumen de la cita o mensaje de error si no valida\r\n\tmostrarResumen();\r\n\r\n\t// almacenar el nombre de la cita en el objeto\r\n\tnombreCita();\r\n\r\n\t// almacenar el fecha de la cita en el objeto\r\n\tfechaCita();\r\n\r\n\t// deshabilitar dias pasados\r\n\tdeshabilitarfechaAnterior();\r\n\r\n\t// Almacenar hora de la cita en el objeto\r\n\thoraCita();\r\n}\r\n\r\nfunction mostrarSeccion() {\r\n\t// Eliminar secciones de\r\n\tconst seccionAnterior = document.querySelector('.mostrar-seccion');\r\n\tif (seccionAnterior) {\r\n\t\tseccionAnterior.classList.remove('mostrar-seccion');\r\n\t}\r\n\r\n\tconst seccionActual = document.querySelector(`#paso-${pagina}`);\r\n\tseccionActual.classList.add('mostrar-seccion');\r\n\r\n\t// Eliminar la clase de seleccionado en el tab anterior\r\n\tconst tabAnterior = document.querySelector('.tabs button.seleccionado');\r\n\tif (tabAnterior) {\r\n\t\ttabAnterior.classList.remove('seleccionado');\r\n\t}\r\n\t// resaltar tab actual\r\n\tconst tab = document.querySelector(`[data-paso=\"${pagina}\"]`);\r\n\ttab.classList.add('seleccionado');\r\n}\r\nfunction cambiarSeccion() {\r\n\tconst enlaces = document.querySelectorAll('.tabs button');\r\n\r\n\tenlaces.forEach((enlace) => {\r\n\t\tenlace.addEventListener('click', (e) => {\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\t// cambiar el data-paso a un num entero\r\n\t\t\tpagina = parseInt(e.target.dataset.paso);\r\n\t\t\t// console.log(pagina);\r\n\r\n\t\t\t// llamar la función de mostrar seccion\r\n\t\t\tmostrarSeccion();\r\n\r\n\t\t\tbotonesPaginacion();\r\n\t\t});\r\n\t});\r\n}\r\nasync function mostrarServicios() {\r\n\ttry {\r\n\t\tconst resultado = await fetch('./servicios.json');\r\n\t\tconst db = await resultado.json();\r\n\t\tconst {servicios} = db;\r\n\t\t// console.log(resultado);\r\n\t\tservicios.forEach((servicio) => {\r\n\t\t\t// console.log(servicio);\r\n\t\t\tconst {id, nombre, precio} = servicio;\r\n\r\n\t\t\t// DOM Scripting\r\n\t\t\tconst nombreServicio = document.createElement('P');\r\n\t\t\tnombreServicio.textContent = nombre;\r\n\t\t\tnombreServicio.classList.add('nombre-servicio');\r\n\t\t\t// console.log(nombreServicio);\r\n\r\n\t\t\tconst precioServio = document.createElement('P');\r\n\t\t\tprecioServio.textContent = `${precio} €`;\r\n\t\t\tprecioServio.classList.add('nombre-precio');\r\n\t\t\t// console.log(precioServio);\r\n\r\n\t\t\t// generar div contenedor de info\r\n\t\t\tconst servicioDiv = document.createElement('DIV');\r\n\t\t\tservicioDiv.classList.add('servicio');\r\n\t\t\tservicioDiv.dataset.idServicio = id;\r\n\r\n\t\t\t// seleccionar un servicio para la cita\r\n\t\t\tservicioDiv.onclick = selecionarServicio;\r\n\r\n\t\t\t// inyectar precio y nombre en el serviciosDiv\r\n\t\t\tservicioDiv.appendChild(nombreServicio);\r\n\t\t\tservicioDiv.appendChild(precioServio);\r\n\t\t\t// console.log(servicioDiv);\r\n\r\n\t\t\t// Inyectarlo en el HTML\r\n\t\t\tdocument.querySelector('#servicios').appendChild(servicioDiv);\r\n\t\t});\r\n\t} catch (error) {\r\n\t\t// console.log(error);\r\n\t}\r\n}\r\n\r\nfunction selecionarServicio(e) {\r\n\t// console.log('click en el servicio');\r\n\t// const id = e.target.dataset.id\r\n\r\n\t// forzar el click solo en el div y no en el párrafo\r\n\tlet elemento;\r\n\tif (e.target.tagName === 'P') {\r\n\t\t// console.log('click en el parrafo');\r\n\t\t// console.log(e.target.parentElement);\r\n\t\telemento = e.target.parentElement;\r\n\t} else {\r\n\t\t// console.log('click en el DIV');\r\n\t\telemento = e.target;\r\n\t\t// console.log(e.target);\r\n\t}\r\n\r\n\t// saber si el elemento esta seleccionado\r\n\tif (elemento.classList.contains('selecionado')) {\r\n\t\t// console.log('esta selecionado y lo quita');\r\n\t\telemento.classList.remove('selecionado');\r\n\t\tconst id = parseInt(elemento.dataset.idServicio);\r\n\r\n\t\teliminarServicio(id);\r\n\t} else {\r\n\t\t// console.log('no esta seleccionado y lo pone');\r\n\t\telemento.classList.add('selecionado');\r\n\r\n\t\t// console.log(elemento.dataset.idServicio);\r\n\t\t// console.log(elemento.firstElementChild.textContent);\r\n\t\t// console.log(elemento.firstElementChild.nextElementSibling.textContent);\r\n\t\tconst servicioObj = {\r\n\t\t\tid: parseInt(elemento.dataset.idServicio),\r\n\t\t\tnombre: elemento.firstElementChild.textContent,\r\n\t\t\tprecio: elemento.firstElementChild.nextElementSibling.textContent,\r\n\t\t};\r\n\r\n\t\t// console.log(servicioObj);\r\n\t\tagregarServicio(servicioObj);\r\n\t}\r\n}\r\nfunction eliminarServicio(id) {\r\n\t// console.log('eliminando servicio...', id);\r\n\tconst {servicios} = cita;\r\n\r\n\t// eliminar los que sean diferentes en id\r\n\tcita.servicios = servicios.filter((servicio) => servicio.id !== id);\r\n\r\n\tconsole.log(cita);\r\n}\r\n\r\nfunction agregarServicio(objeto) {\r\n\t// console.log('agregando servicio...');\r\n\tconst {servicios} = cita;\r\n\r\n\t// agregar los servicios al objeto\r\n\tcita.servicios = [...servicios, objeto];\r\n\r\n\tconsole.log(cita);\r\n}\r\n\r\nfunction paginaSiguiente() {\r\n\t// console.log('pagina siguiente');\r\n\tconst paginaSiguiente = document.querySelector('#siguiente');\r\n\tpaginaSiguiente.addEventListener('click', () => {\r\n\t\tpagina++;\r\n\t\tbotonesPaginacion();\r\n\t});\r\n}\r\n\r\nfunction paginaAnterior() {\r\n\t// console.log('pagina anterior');\r\n\tconst paginaAnterior = document.querySelector('#anterior');\r\n\r\n\tpaginaAnterior.addEventListener('click', () => {\r\n\t\tpagina--;\r\n\t\tbotonesPaginacion();\r\n\t});\r\n}\r\nfunction botonesPaginacion() {\r\n\tconst paginaSiguiente = document.querySelector('#siguiente');\r\n\tconst paginaAnterior = document.querySelector('#anterior');\r\n\r\n\tif (pagina === 1) {\r\n\t\tpaginaAnterior.classList.add('ocultar');\r\n\t\t// paginaSiguiente.classList.remove('ocultar');\r\n\t} else if (pagina === 3) {\r\n\t\tpaginaSiguiente.classList.add('ocultar');\r\n\t\tpaginaAnterior.classList.remove('ocultar');\r\n\r\n\t\tmostrarResumen(); // cargar los datos cuando estemos en la pagina 3\r\n\t} else {\r\n\t\tpaginaAnterior.classList.remove('ocultar');\r\n\t\tpaginaSiguiente.classList.remove('ocultar');\r\n\t}\r\n\tmostrarSeccion(); // cambia la seccion que se muestra\r\n}\r\n\r\nfunction mostrarResumen() {\r\n\t// Destructuring\r\n\tconst {nombre, fecha, hora, servicios} = cita;\r\n\r\n\t// Seleccionar div del resumen\r\n\tconst resumenDiv = document.querySelector('.contenido-resumen');\r\n\r\n\t// limpiar el html para que no muestre el \"faltan datos\"\r\n\r\n\twhile (resumenDiv.innerHTML) {\r\n\t\tresumenDiv.removeChild(resumenDiv.firstChild);\r\n\t}\r\n\r\n\t// validación de objeto\r\n\tif (Object.values(cita).includes('')) {\r\n\t\tconst noServicios = document.createElement('P');\r\n\t\tnoServicios.textContent = 'Faltan datos de servicios, hora, fecha o nombre';\r\n\t\tnoServicios.classList.add('invalidar-cita');\r\n\r\n\t\t// agregar a resumen a DIV\r\n\t\tresumenDiv.appendChild(noServicios);\r\n\t\treturn;\r\n\t}\r\n\r\n\t// mostrar el resumen\r\n\r\n\tconst headingCita = document.createElement('H3');\r\n\theadingCita.textContent = 'Resumen Cita';\r\n\r\n\tconst nombreCita = document.createElement('P');\r\n\tnombreCita.innerHTML = `<span>Nombre:</span> ${nombre}`;\r\n\r\n\tconst fechaCita = document.createElement('P');\r\n\tfechaCita.innerHTML = `<span>Fecha:</span> ${fecha}`;\r\n\r\n\tconst horaCita = document.createElement('P');\r\n\thoraCita.innerHTML = `<span>Hora:</span> ${hora}`;\r\n\r\n\t// Iterar sobre el array de servicios\r\n\r\n\tconst serviciosCita = document.createElement('DIV');\r\n\tserviciosCita.classList.add('resumen-servicios');\r\n\r\n\tconst headingServicios = document.createElement('H3');\r\n\theadingServicios.textContent = 'Resumen Servicios';\r\n\r\n\tserviciosCita.appendChild(headingServicios);\r\n\r\n\tlet cantidad = 0;\r\n\r\n\tservicios.forEach((servicio) => {\r\n\t\tconst {nombre, precio} = servicio;\r\n\t\tconst contenedorServicio = document.createElement('DIV');\r\n\t\tcontenedorServicio.classList.add('contenedor-servicio');\r\n\r\n\t\tconst textoServicio = document.createElement('P');\r\n\t\ttextoServicio.textContent = nombre;\r\n\r\n\t\tconst precioServicio = document.createElement('P');\r\n\t\tprecioServicio.textContent = precio;\r\n\t\tprecioServicio.classList.add('precio');\r\n\r\n\t\t// Sumar precios de los servicios\r\n\t\tconst totalServicio = precio.split('€');\r\n\t\t// console.log(parseInt(totalServicio[0].trim()));\r\n\t\tcantidad += parseInt(totalServicio[0].trim());\r\n\r\n\t\t// colocar texto y precio en el div\r\n\r\n\t\tcontenedorServicio.appendChild(textoServicio);\r\n\t\tcontenedorServicio.appendChild(precioServicio);\r\n\r\n\t\tserviciosCita.appendChild(contenedorServicio);\r\n\t});\r\n\tconsole.log(cantidad);\r\n\tresumenDiv.appendChild(headingCita);\r\n\tresumenDiv.appendChild(nombreCita);\r\n\tresumenDiv.appendChild(fechaCita);\r\n\tresumenDiv.appendChild(horaCita);\r\n\tresumenDiv.appendChild(serviciosCita);\r\n\r\n\tconst cantidadPagar = document.createElement('P');\r\n\tcantidadPagar.classList.add('total');\r\n\tcantidadPagar.innerHTML = `<span>Total a Pagar: </span>${cantidad} €`;\r\n\tresumenDiv.appendChild(cantidadPagar);\r\n}\r\n\r\nfunction nombreCita() {\r\n\tconst nombreInput = document.querySelector('#nombre');\r\n\tnombreInput.addEventListener('input', (e) => {\r\n\t\t// console.log('escribiendo en los inputs en tiempo real...');\r\n\t\t// trim elimina los posibles espacios en blanco\r\n\t\tconst nombreTexto = e.target.value;\r\n\t\t// console.log(nombreTexto);\r\n\r\n\t\t// validación de que el nombre texto no puede estar vacío\r\n\r\n\t\tif (nombreTexto === '' || nombreTexto.length < 3) {\r\n\t\t\t// console.log('nombre no valido', 'error');\r\n\t\t\tmostrarAlerta('Nombre no válido', 'error');\r\n\t\t} else {\r\n\t\t\tconst alerta = document.querySelector('.alerta');\r\n\t\t\tif (alerta) {\r\n\t\t\t\talerta.remove();\r\n\t\t\t}\r\n\r\n\t\t\tcita.nombre = nombreTexto;\r\n\t\t\t// console.log(cita);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction mostrarAlerta(mensaje, tipo) {\r\n\t// si hay una alerta no crear otra\r\n\r\n\tconst alertaPrevia = document.querySelector('.alerta');\r\n\tif (alertaPrevia) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst alerta = document.createElement('DIV');\r\n\talerta.textContent = mensaje;\r\n\talerta.classList.add('alerta');\r\n\tif (tipo === 'error') {\r\n\t\talerta.classList.add('error');\r\n\t}\r\n\t// console.log(alerta);\r\n\r\n\t// Insertar en el HTML\r\n\tconst formulario = document.querySelector('.formulario');\r\n\tformulario.appendChild(alerta);\r\n\r\n\t// eliminar alerta después de 3 segundos\r\n\tsetTimeout(() => {\r\n\t\talerta.remove();\r\n\t}, 3000);\r\n}\r\n\r\nfunction fechaCita() {\r\n\tconst fechaInput = document.querySelector('#fecha');\r\n\tfechaInput.addEventListener('input', (e) => {\r\n\t\t// console.log();\r\n\r\n\t\t/*\r\n\r\n\t\t// cambiar de idioma los datos de objeto Date \r\n\r\n\t\tconst opciones = {\r\n\t\t\tweekday = 'long',\r\n\t\t\tyear = 'numeric',\r\n\t\t\tmonth = 'long'\r\n\t\t}\r\n\t\tconst dia = new Date(e.target.value).toLocaleDateString('es-ES', opciones);\r\n\t\t\r\n\t\t*/\r\n\t\t// convertir fecha en string, getUTCDay() nos da el dia de la semana de 0 a 6\r\n\r\n\t\tconst dia = new Date(e.target.value).getUTCDay();\r\n\r\n\t\t// validar dia de la semana, domingos y sábados no pasa\r\n\t\tif ([0, 6].includes(dia)) {\r\n\t\t\t// reset al valor del input\r\n\t\t\te.preventDefault();\r\n\t\t\tfechaInput.value = '';\r\n\t\t\t// console.log('Este dia no es valido');\r\n\t\t\tmostrarAlerta('Fines de semana no válidos', 'error');\r\n\t\t} else {\r\n\t\t\t// console.log('dia valido');\r\n\t\t\tcita.fecha = fechaInput.value;\r\n\t\t}\r\n\t\t// console.log(cita);\r\n\t\t// console.log(dia);\r\n\t});\r\n}\r\n\r\nfunction deshabilitarfechaAnterior() {\r\n\tconst inputFecha = document.querySelector('#fecha');\r\n\r\n\t// saber el dia de hoy\r\n\tconst fechaHoy = new Date();\r\n\tconst year = fechaHoy.getFullYear();\r\n\t// para evitar reservas el mismo dia le sumamos uno\r\n\tconst dia = fechaHoy.getDate() + 1;\r\n\t// los meses en JS empiezan en 0\r\n\tconst mes = fechaHoy.getMonth() + 1;\r\n\r\n\t// asegurarnos el formato deseado para validar la fecha AAAA-MM-DD\r\n\t// ${mes < 10 ? `0${mes}` : mes} para asegurarnos que la fecha tiene dos dígitos\r\n\r\n\tconst fechaDeshabilitar = `${year}-${mes < 10 ? `0${mes}` : mes}-${dia}`;\r\n\tinputFecha.min = fechaDeshabilitar;\r\n}\r\n\r\nfunction horaCita() {\r\n\tconst inputHora = document.querySelector('#hora');\r\n\tinputHora.addEventListener('input', (e) => {\r\n\t\tconst horaCitas = e.target.value;\r\n\t\t// nos devuelve un array divido desde :\r\n\t\tconst hora = horaCitas.split(':');\r\n\t\tif (hora[0] < 10 || hora[0] > 18) {\r\n\t\t\t// console.log('horas no validas');\r\n\t\t\tmostrarAlerta('Hora no válida', 'error');\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tinputHora.value = '';\r\n\t\t\t}, 2000);\r\n\t\t} else {\r\n\t\t\tcita.hora = horaCitas;\r\n\t\t}\r\n\t});\r\n}\r\n"]}